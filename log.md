# MedTator React é‡æ„ - å¼€å‘æ—¥å¿—

### 2026-02-11 - Session 1.1 é¡¹ç›®å¯åŠ¨ä¸æ¶æ„è®¾è®¡

**ä¸Šåˆ - ç¯å¢ƒæ­å»º**ï¼š
- âœ… Fork åŸé¡¹ç›®åˆ°ä¸ªäººä»“åº“
- âœ… åˆ›å»º jay-dev å¼€å‘åˆ†æ”¯
- âœ… æ­å»º Python è™šæ‹Ÿç¯å¢ƒ
- âœ… åŸç‰ˆåº”ç”¨æˆåŠŸè¿è¡Œï¼ˆFlask http://localhost:8086ï¼‰
- âœ… åˆ›å»ºå·¥ä½œæ–‡æ¡£ work.mdï¼ˆåæ”¹åä¸º reload.mdï¼‰

**ä¸‹åˆ - ä»£ç åˆ†æ**ï¼š
- ğŸ“Š ä»£ç é‡ç»Ÿè®¡ï¼š35ä¸ªJSæ–‡ä»¶ (18807è¡Œ) + 23ä¸ªHTMLæ¨¡æ¿ (11031è¡Œ)
- ğŸ“Š æ ¸å¿ƒæ–‡ä»¶ï¼šapp_hotpot.js (3795è¡Œ) + 13ä¸ªæ‰©å±•æ¨¡å— (~6500è¡Œ)
- ğŸ“Š è§£æå™¨ï¼šann(1085è¡Œ) + dtd(1092è¡Œ) + brat(560è¡Œ) + bioc(229è¡Œ)
- ğŸ—ï¸ æ¶æ„åˆ†æï¼šå•é¡µåº”ç”¨ï¼ˆ7ä¸ªTabï¼‰ã€å·¨å‹Vueå®ä¾‹ã€File System Access API
- ğŸ¯ ç¡®å®šé‡æ„ç­–ç•¥ï¼šbratå°è£…è€Œéé‡å†™ï¼ŒåŸç‰ˆä»£ç ä¿æŒä¸åŠ¨

**æ™šä¸Š - Reacté¡¹ç›®åˆå§‹åŒ–**ï¼š
- âœ… ä½¿ç”¨Viteåˆ›å»ºReact 18 + TypeScripté¡¹ç›®
- âœ… å®‰è£…176ä¸ªä¾èµ–åŒ…
- âœ… éªŒè¯å¼€å‘æœåŠ¡å™¨è¿è¡Œï¼ˆhttp://localhost:5173ï¼‰
- âœ… Gitæäº¤ï¼š"vite init" (e9c5464)
- ğŸ—ï¸ å®ŒæˆReactæ¶æ„è®¾è®¡æ–‡æ¡£
- ğŸ”§ ä¿®æ­£é‡æ„è®¡åˆ’ï¼šè§£æå™¨æå‰åˆ° M3ï¼Œæ ‡æ³¨ç¼–è¾‘å™¨è°ƒæ•´ä¸º 15å¤©ï¼Œæ€»å‘¨æœŸ 18å‘¨

**æŠ€æœ¯å†³ç­–**ï¼š
- ç›®å½•ç»“æ„ï¼šä¿æŒæ ¹ç›®å½•ä¸å˜ + æ–°å»ºMedTator-React/
- çŠ¶æ€ç®¡ç†ï¼šZustandï¼ˆä¸€ä¸ªstore.tsæå®šï¼‰
- Tabåˆ‡æ¢ï¼šä¸ç”¨è·¯ç”±ï¼Œstateæ¡ä»¶æ¸²æŸ“
- UIæ¡†æ¶ï¼šAnt Designæ›¿ä»£Metro UI
- æ¡Œé¢æ‰“åŒ…ï¼šElectronï¼ˆæ›¿ä»£æµè§ˆå™¨File System Access APIï¼‰

### Session 1.2 - æ¶æ„ç®€åŒ–

- ğŸ”§ ç æ‰è¿‡åº¦è®¾è®¡ï¼šReact Routerã€ESLint/Prettierã€æµ‹è¯•ã€å¤šsliceçŠ¶æ€ç®¡ç†
- ğŸ”§ æ¨¡å—ä»15ä¸ªç²¾ç®€ä¸º8ä¸ªï¼Œå‘¨æœŸä»18å‘¨å‹ç¼©åˆ°8å‘¨
- ğŸ”§ åŠ å…¥Electronæ¡Œé¢æ‰“åŒ…æ–¹æ¡ˆ
- ğŸ”§ ç›®å½•ç»“æ„æ”¹ä¸ºæ‰å¹³ï¼ˆcomponents/ä¸‹ç›´æ¥æ”¾ç»„ä»¶ï¼‰

### Session 1.3 - åŸç‰ˆæ·±åº¦åˆ†æ + M1æ”¶å°¾

**æ–°å‘ç°**ï¼š
- Flask æœåŠ¡å™¨å‡ ä¹æ— ç”¨ï¼Œåªserveé™æ€é¡µé¢ + æ³¨å…¥sampleæ•°æ®ï¼Œæ— åç«¯API
- vpp_data å…¨å±€çŠ¶æ€å«30+å±æ€§ï¼Œéœ€è¦å®Œæ•´æ¬åˆ°store.ts
- 7ä¸ªTabå„å¯¹åº”ä¸€ä¸ªextæ¨¡å—ï¼Œè¡Œæ•°å·®å¼‚å¤§ï¼ˆ75è¡Œ~1314è¡Œï¼‰
- 4ä¸ªparseræ˜¯çº¯å‡½æ•°æ— DOMä¾èµ–ï¼Œæœ€é€‚åˆå…ˆç§»æ¤
- Electroné›†æˆæ¨è¿Ÿåˆ°M7ï¼Œå…ˆç”¨æµè§ˆå™¨file inputåšæ–‡ä»¶æ“ä½œ

**å†³ç­–è°ƒæ•´**ï¼š
- M1çš„Electroné›†æˆæ¨è¿Ÿ â†’ å…ˆåšæ ¸å¿ƒåŠŸèƒ½ï¼Œæœ€åæ‰“åŒ…
- M3æ–‡ä»¶æ“ä½œå…ˆç”¨æµè§ˆå™¨æ–¹æ¡ˆï¼ˆinput+drag&dropï¼‰ï¼Œä¸ä¾èµ–Electron
- ä¿®å¤äº†RibbonMenuçš„TabKeyç±»å‹å¯¼å…¥é—®é¢˜ï¼ˆimport typeï¼‰

### 2026-02-11 - Session 2.1 M2è§£æå™¨ç§»æ¤

**M2-è§£æå™¨ç§»æ¤ï¼ˆ4ä¸ªparser â†’ TypeScriptï¼Œ2966è¡Œï¼‰**ï¼š
- âœ… æ–°å»º `types.ts`ï¼šå…±äº«ç±»å‹å®šä¹‰ï¼ˆDtd, DtdTag, Ann, AnnTag, BratDocDataç­‰ï¼‰
- âœ… `parsers/dtd-parser.ts` â† dtd_parser.js (1092è¡Œ)ï¼šSchemaè§£æï¼ˆDTD/JSON/YAMLï¼‰
- âœ… `parsers/ann-parser.ts` â† ann_parser.js (1085è¡Œ)ï¼šæ ‡æ³¨XMLè§£æ/spanå·¥å…·/hintå­—å…¸
- âœ… `parsers/brat-parser.ts` â† brat_parser.js (560è¡Œ)ï¼šBRATæ ¼å¼è½¬æ¢+é¢œè‰²ç®¡ç†
- âœ… `parsers/bioc-parser.ts` â† bioc_parser.js (229è¡Œ)ï¼šBioC XMLç”Ÿæˆ/å¯¼å‡º
- âœ… å®‰è£…ä¾èµ–ï¼šjs-yaml + @types/js-yaml
- âœ… TypeScriptç¼–è¯‘é›¶é”™è¯¯

**Annotation Tab å¸ƒå±€å¯¹é½**ï¼š
- ğŸ“ å·¥å…·æ Ribbonï¼š8ä¸ªåˆ†ç»„ï¼ˆSchema/File/Display/Search/Entity/Link/Hint/Helpï¼‰
- ğŸ“ ä¸ŠåŠåŒº(60%)ï¼šæ–‡ä»¶åˆ—è¡¨é¢æ¿(250px) + CodeMirrorç¼–è¾‘å™¨å ä½
- ğŸ“ ä¸‹åŠåŒº(40%)ï¼šTagå®šä¹‰åˆ—è¡¨ + æ ‡æ³¨è¡¨æ ¼
- ğŸ¯ çº¯å¸ƒå±€éª¨æ¶ï¼ŒåŠŸèƒ½åç»­æ¥å…¥

**å•å…ƒæµ‹è¯•ï¼ˆVitest + jsdomï¼‰**ï¼š
- âœ… 67ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼š
  - dtd-parser.test.ts (17ä¸ª)ï¼šDTD/JSON/YAMLè§£æã€roundtripã€è¾¹ç•Œæƒ…å†µ
  - ann-parser.test.ts (30ä¸ª)ï¼šspanå·¥å…·ã€xml2annã€tagå·¥å…·ã€hintå­—å…¸
  - brat-parser.test.ts (14ä¸ª)ï¼šé¢œè‰²ç®¡ç†ã€parseAnnã€collection/documentæ•°æ®
  - bioc-parser.test.ts (6ä¸ª)ï¼šBioC XMLç”Ÿæˆã€entity/relation/å¤šæ–‡æ¡£
- âœ… ç”¨sample/çœŸå®æ•°æ®éªŒè¯é€šè¿‡
- ğŸ”§ vite.config.ts é…ç½® jsdom ç¯å¢ƒ
- ğŸ”§ package.json æ·»åŠ  `npm test` / `npm run test:watch`

**ä»£ç å®¡æŸ¥ä¿®å¤ï¼ˆé€å‡½æ•°å¯¹ç…§åŸç‰ˆï¼Œ9ä¸ªé—®é¢˜ï¼‰**ï¼š
- ğŸ› dtd-parser: `NON_CONSUMING_SPANS` æœªå¯¼å‡º â†’ åŠ export
- ğŸ› dtd-parser: `getAttrRequire()` åªå–é¦–ä¸ªåŒ¹é… â†’ æ”¹ä¸ºå–æœ€åä¸€ä¸ªï¼ˆå¾ªç¯ï¼‰
- ğŸ› dtd-parser: `parseTmpDtd()` ç”¨truthinessæ£€æŸ¥ â†’ æ”¹ç”¨hasOwnProperty
- ğŸ› ann-parser: `ann2xml` ç©ºmetaä¹Ÿç”Ÿæˆæ ‡ç­¾ â†’ åŠ é•¿åº¦å®ˆå«
- ğŸ› brat-parser: ç¼º `ann2brat()` å‡½æ•° â†’ è¡¥stubï¼ˆåŸç‰ˆä¹Ÿæœªå®Œæˆï¼‰
- ğŸ› brat-parser: `medtagger2brat` å¤šä½™certaintyå®ˆå« â†’ å»æ‰
- ğŸ› brat-parser: emojiè¢«æ¢æˆASCII â†’ æ¢å¤ â•â–â“
- ğŸ› brat-parser: `getColor` ç”¨falsyæ£€æŸ¥ â†’ æ”¹ç”¨hasOwnProperty
- ğŸ¯ æ”¹è¿›ä¿ç•™ï¼š`mkBaseTag` id_prefix bugä¿®å¤ã€nullå®ˆå«ã€`.contains()â†’.includes()`

**å·²çŸ¥é—ç•™**ï¼š
- â¸ `ann-parser` ç¼º `get_subtags_of_substr_in_ann`ï¼ˆM4å®ç°ï¼Œéœ€nlp_toolkitï¼‰
- â¸ `ann-parser` ç¼º `pretty_xml_str`ï¼ˆä¾èµ–jQueryï¼Œæ— è°ƒç”¨è€…ï¼‰

### 2026-02-12 - Session 3.1 M3 Step 1: store.ts çŠ¶æ€è®¾è®¡

**åŸç‰ˆçŠ¶æ€å…¨é‡æ¢³ç†**ï¼š
- ğŸ“Š æ‰«æ app_hotpot.js çš„ vpp_dataï¼ˆ30è¡Œ~175è¡Œï¼‰+ 11ä¸ªextæ¨¡å—
- ğŸ“Š ç»Ÿè®¡å‡ºåŸç‰ˆå…± 96+ ä¸ªçŠ¶æ€å±æ€§
- ğŸ¯ ç­›é€‰å‡º M3 éœ€è¦çš„ 16 ä¸ªå±æ€§ + 14 ä¸ª actions

**é‡å†™ store.tsï¼ˆ40è¡Œ â†’ 169è¡Œï¼‰**ï¼š
- âœ… ç”¨ `types.ts` çš„çœŸå®ç±»å‹ï¼ˆ`Dtd`, `Ann`ï¼‰æ›¿ä»£ `any`
- âœ… æ–°å¢å¯¼å‡ºç±»å‹ï¼š`SortAnnsBy`ï¼ˆ6ç§æ’åºï¼‰ã€`CmSettings`ï¼ˆ7ä¸ªç¼–è¾‘å™¨é€‰é¡¹ï¼‰
- âœ… çŠ¶æ€åˆ†7ç»„ï¼šTab / Schema / æ ‡æ³¨æ–‡ä»¶ / æ–‡ä»¶åˆ—è¡¨ / Tagè¿‡æ»¤ / åŠ è½½è¿›åº¦ / CMè®¾ç½®
- âœ… TypeScriptç¼–è¯‘é›¶é”™è¯¯ï¼Œ67ä¸ªè§£æå™¨æµ‹è¯•å…¨éƒ¨é€šè¿‡

**å…³é”®è®¾è®¡å†³ç­–**ï¼š
- ğŸ¯ `setAnns` è‡ªåŠ¨é‡ç½® `annIdx=0` + `pgIndex=0`
- ğŸ¯ `addAnns` å¢é‡è¿½åŠ ä¸è¦†ç›–ï¼ˆé€‚é…å¼‚æ­¥æ‰¹é‡åŠ è½½ï¼‰
- ğŸ¯ `removeAnn` è‡ªåŠ¨ä¿®æ­£ `annIdx`ï¼ˆåˆ é™¤åä¸è¶Šç•Œï¼‰
- ğŸ¯ æ’åº/è¿‡æ»¤å˜æ›´æ—¶è‡ªåŠ¨ `pgIndex=0`
- ğŸ¯ Loading ä¸‰é˜¶æ®µï¼š`start` â†’ `update` â†’ `finish`
- â¸ æœªæ¥æ¨¡å—çŠ¶æ€ï¼ˆhintsã€linkingã€IAAã€razerç­‰ï¼‰ç­‰åˆ°å¯¹åº”æ¨¡å—æ—¶å†åŠ 

**çŠ¶æ€æ¥å£**ï¼š
```typescript
interface AppState {
  // Tab
  currentTab: TabKey
  // Schema
  dtd: Dtd | null
  // æ ‡æ³¨æ–‡ä»¶
  anns: Ann[]
  annIdx: number | null
  // æ–‡ä»¶åˆ—è¡¨
  sortAnnsBy: SortAnnsBy
  fnPattern: string
  pgIndex: number
  pgNumPerPage: number
  // Tagè¿‡æ»¤
  displayTagName: string
  // åŠ è½½è¿›åº¦
  isLoadingAnns: boolean
  nAnnsDropped/Loaded/Error: number
  msgLoadingAnns: string
  // CMè®¾ç½®
  cm: CmSettings
}
```

**ä¸‹ä¸€æ­¥**ï¼šM3 Step 2 - æ–‡ä»¶æ“ä½œï¼ˆfile-helper + æ‹–æ‹½ + parseræ¥å…¥ + UIæ›´æ–°ï¼‰

### 2026-02-12 - Session 3.2 M3 Step 2: æ–‡ä»¶æ“ä½œ

**æ ¸å¿ƒåŠŸèƒ½å®ç°**ï¼š
- âœ… åˆ›å»º `utils/file-helper.ts` (75è¡Œ)ï¼šæ–‡ä»¶è¯»å–ã€ç±»å‹æ£€æŸ¥ã€ä¸‹è½½å·¥å…·
- âœ… é‡å†™ `Annotation.tsx` (305è¡Œ â†’ 500+è¡Œ)ï¼š
  - Schema åŠ è½½ï¼šæ‹–æ‹½ + æ–‡ä»¶é€‰æ‹©å™¨ï¼Œæ”¯æŒ .dtd/.json/.yaml
  - Annotation åŠ è½½ï¼šæ‰¹é‡åŠ è½½ .xml/.txtï¼Œæ˜¾ç¤º loading è¿›åº¦
  - æ–‡ä»¶åˆ—è¡¨ï¼šæ˜¾ç¤ºã€æ’åº(6ç§)ã€è¿‡æ»¤ã€åˆ†é¡µ(100/é¡µ)ã€ç‚¹å‡»åˆ‡æ¢
  - ç¼–è¾‘å™¨ï¼šæ˜¾ç¤ºå½“å‰æ–‡ä»¶æ–‡æœ¬ï¼ˆæš‚ç”¨ textarea å ä½ï¼‰
  - Tag åˆ—è¡¨ï¼šæ˜¾ç¤º DTD çš„ Entity/Relation Tagsï¼Œæ”¯æŒç‚¹å‡»è¿‡æ»¤
  - æ ‡æ³¨è¡¨æ ¼ï¼šæ˜¾ç¤ºå½“å‰æ–‡ä»¶æ ‡æ³¨(Tag/ID/Spans/Text/Attributes)ï¼Œæ”¯æŒ Tag è¿‡æ»¤
- âœ… æ•°æ®æµæ‰“é€šï¼šæ–‡ä»¶æ‹–æ‹½ â†’ Parserè§£æ â†’ Storeæ›´æ–° â†’ UIè‡ªåŠ¨åˆ·æ–°
- âœ… é”™è¯¯å¤„ç†ï¼šæ–‡ä»¶ç±»å‹æ£€æŸ¥ã€è§£æå¤±è´¥æç¤ºã€é”™è¯¯è®¡æ•°

**æµ‹è¯•éªŒè¯**ï¼š
- âœ… ç”Ÿæˆæµ‹è¯•æ–‡ä»¶ï¼š`test-schema.dtd` (3 Entity + 2 Relation) + `test-annotation.xml` (7 ä¸ªæ ‡æ³¨)
- âœ… åŠŸèƒ½æ‰‹åŠ¨æµ‹è¯•ï¼šSchema åŠ è½½ã€Annotation åŠ è½½ã€Tag è¿‡æ»¤ã€æ–‡ä»¶åˆ‡æ¢ - å…¨éƒ¨æ­£å¸¸
- âœ… TypeScript ç¼–è¯‘é›¶é”™è¯¯
- âœ… 67 ä¸ª parser æµ‹è¯•å…¨éƒ¨é€šè¿‡

**ä¿®å¤é—®é¢˜**ï¼š
- ğŸ› æ¸…ç†æœªä½¿ç”¨ importsï¼ˆAnnotation.tsxã€æµ‹è¯•æ–‡ä»¶ï¼‰
- ğŸ› `ann-parser.ts` å‚æ•°é‡å‘½åï¼ˆ`dtd` â†’ `_dtd`ï¼‰

**æŠ€æœ¯å†³ç­–**ï¼š
- ğŸ¯ æš‚æ—¶ä¸ç”¨ CodeMirrorï¼ˆM4 å†é›†æˆæ ‡æ³¨åŠŸèƒ½ï¼‰
- ğŸ¯ Tags/Tags_r/Label æ’åºæœªå®ç°ï¼ˆæ ‡è®° TODOï¼‰
- ğŸ¯ ä½¿ç”¨ useMemo ä¼˜åŒ–åˆ—è¡¨è¿‡æ»¤/æ’åº

**è¿›åº¦**ï¼šM3 å®Œæˆ 2.5/3 æ­¥éª¤ï¼ˆ83%ï¼‰

**ä¸‹ä¸€æ­¥é€‰æ‹©**ï¼š
- é€‰é¡¹ 1: M3 Step 3 - ZIP æ‰“åŒ…åŠŸèƒ½
- é€‰é¡¹ 2: è·³åˆ° M4 - æ ‡æ³¨ç¼–è¾‘å™¨ï¼ˆCodeMirror + å®ä½“/å…³ç³»æ ‡æ³¨ï¼‰

---

*æœ€åæ›´æ–°: 2026-02-12*